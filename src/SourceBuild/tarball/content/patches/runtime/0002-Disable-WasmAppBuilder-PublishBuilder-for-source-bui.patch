From 3638f46d82289dee4d87b82190e3ef67105b4c56 Mon Sep 17 00:00:00 2001
From: Michael Simons <msimons@microsoft.com>
Date: Wed, 8 Sep 2021 16:15:49 +0000
Subject: [PATCH] Disable WasmAppBuilder PublishBuilder for source-build

Temporary until https://github.com/dotnet/runtime/issues/58816 is resolved.
---
 src/tasks/WasmAppBuilder/WasmAppBuilder.csproj | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/tasks/WasmAppBuilder/WasmAppBuilder.csproj b/src/tasks/WasmAppBuilder/WasmAppBuilder.csproj
index 3c93ab5d643..9e325bfcbf4 100644
--- a/src/tasks/WasmAppBuilder/WasmAppBuilder.csproj
+++ b/src/tasks/WasmAppBuilder/WasmAppBuilder.csproj
@@ -24,7 +24,8 @@
   </ItemGroup>
 
   <Target Name="PublishBuilder"
-          AfterTargets="Build">
+          AfterTargets="Build"
+          Condition="'$(DotNetBuildFromSource)' != 'true'">
 
     <!-- needed for publishing with multi-targeting. We are publishing essentially to get the SR.MetadataLoadContext.dll :/ -->
     <ItemGroup>
-- 
2.29.2

