From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: MichaelSimons <msimons@microsoft.com>
Date: Thu, 27 Oct 2022 22:02:11 +0000
Subject: [PATCH] Build public redist in source-build

Backport: https://github.com/dotnet/source-build/issues/3092
---
 eng/SourceBuild.props                                           | 2 +-
 .../App.Runtime/src/Microsoft.AspNetCore.App.Runtime.csproj     | 2 --
 2 files changed, 1 insertion(+), 3 deletions(-)

diff --git a/eng/SourceBuild.props b/eng/SourceBuild.props
index 32108e1f9f..a034f88679 100644
--- a/eng/SourceBuild.props
+++ b/eng/SourceBuild.props
@@ -68,7 +68,7 @@
       <!--
         Add the internal installers artifacts required by dotnet/installer.
       -->
-      <IntermediateNupkgArtifactFile Include="$(InstallersArtifactsDir)aspnetcore-runtime-internal-*.tar.gz" />
+      <IntermediateNupkgArtifactFile Include="$(InstallersArtifactsDir)aspnetcore-runtime-*.tar.gz" />
       <IntermediateNupkgArtifactFile Include="$(InstallersArtifactsDir)aspnetcore_base_runtime.version" />
     </ItemGroup>
   </Target>
diff --git a/src/Framework/App.Runtime/src/Microsoft.AspNetCore.App.Runtime.csproj b/src/Framework/App.Runtime/src/Microsoft.AspNetCore.App.Runtime.csproj
index ef72d9960b..8985037c7b 100644
--- a/src/Framework/App.Runtime/src/Microsoft.AspNetCore.App.Runtime.csproj
+++ b/src/Framework/App.Runtime/src/Microsoft.AspNetCore.App.Runtime.csproj
@@ -667,9 +667,7 @@ This package is an internal implementation of the .NET Core SDK and is not meant
       WorkingDirectory="$(CompositeFrameworkLayoutRoot)" />
   </Target>
 
-  <!-- Redist tarball including the dotnet-runtime is not needed in source build -->
   <Target Name="_CreateRedistSharedFxArchive"
-          Condition="'$(DotNetBuildFromSource)' != 'true'"
           Inputs="@(SharedFxContent)"
           Outputs="$(RedistArchiveOutputPath)">
     <Message Importance="High" Text="$(MSbuildProjectFile) -> $(RedistArchiveOutputPath)" />
