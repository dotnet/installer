From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Matt Thalman <mthalman@microsoft.com>
Date: Mon, 24 Jul 2023 15:38:58 -0500
Subject: [PATCH] Update API compat suppressions

Backport: https://github.com/dotnet/runtime/issues/89206
---
 .../src/CompatibilitySuppressions.xml         | 306 ------------------
 .../src/CompatibilitySuppressions.xml         |   8 +
 2 files changed, 8 insertions(+), 306 deletions(-)

diff --git a/src/libraries/System.Linq.Expressions/src/CompatibilitySuppressions.xml b/src/libraries/System.Linq.Expressions/src/CompatibilitySuppressions.xml
index 8186f7b52a9..00e095e354e 100644
--- a/src/libraries/System.Linq.Expressions/src/CompatibilitySuppressions.xml
+++ b/src/libraries/System.Linq.Expressions/src/CompatibilitySuppressions.xml
@@ -24,78 +24,6 @@
     <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
     <Right>lib/net8.0/System.Linq.Expressions.dll</Right>
   </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Linq.Expressions.Interpreter.LightLambda</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.CallSiteOps</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.Closure</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.RuntimeOps</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Linq.Expressions.Interpreter.LightLambda</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.CallSiteOps</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.Closure</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.RuntimeOps</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Linq.Expressions.Interpreter.LightLambda</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.CallSiteOps</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.Closure</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0001</DiagnosticId>
-    <Target>T:System.Runtime.CompilerServices.RuntimeOps</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
   <Suppression>
     <DiagnosticId>CP0002</DiagnosticId>
     <Target>M:System.Linq.Expressions.ElementInit.get_ArgumentCount</Target>
@@ -168,244 +96,10 @@
     <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
     <Right>lib/net8.0/System.Linq.Expressions.dll</Right>
   </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.ElementInit.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.ElementInit.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.IndexExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.IndexExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.InvocationExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.InvocationExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.LambdaExpression.get_CanCompileToIL</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.LambdaExpression.get_CanInterpret</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.MethodCallExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.MethodCallExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.NewExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.NewExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.ElementInit.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.ElementInit.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.IndexExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.IndexExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.InvocationExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.InvocationExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.LambdaExpression.get_CanCompileToIL</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.LambdaExpression.get_CanInterpret</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.MethodCallExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.MethodCallExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.NewExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.NewExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.ElementInit.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.ElementInit.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.IndexExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.IndexExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.InvocationExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.InvocationExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.LambdaExpression.get_CanCompileToIL</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.LambdaExpression.get_CanInterpret</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.MethodCallExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.MethodCallExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.NewExpression.get_ArgumentCount</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0002</DiagnosticId>
-    <Target>M:System.Linq.Expressions.NewExpression.GetArgument(System.Int32)</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
   <Suppression>
     <DiagnosticId>CP0020</DiagnosticId>
     <Target>M:System.Linq.Expressions.DynamicExpressionVisitor.#ctor</Target>
     <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
     <Right>lib/net8.0/System.Linq.Expressions.dll</Right>
   </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0020</DiagnosticId>
-    <Target>M:System.Linq.Expressions.DynamicExpressionVisitor.#ctor</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/ios/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0020</DiagnosticId>
-    <Target>M:System.Linq.Expressions.DynamicExpressionVisitor.#ctor</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/maccatalyst/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
-  <Suppression>
-    <DiagnosticId>CP0020</DiagnosticId>
-    <Target>M:System.Linq.Expressions.DynamicExpressionVisitor.#ctor</Target>
-    <Left>ref/net8.0/System.Linq.Expressions.dll</Left>
-    <Right>runtimes/tvos/lib/net8.0/System.Linq.Expressions.dll</Right>
-  </Suppression>
 </Suppressions>
\ No newline at end of file
diff --git a/src/libraries/System.Private.CoreLib/src/CompatibilitySuppressions.xml b/src/libraries/System.Private.CoreLib/src/CompatibilitySuppressions.xml
index 6ee3efba01f..e4ba9d6bbb8 100644
--- a/src/libraries/System.Private.CoreLib/src/CompatibilitySuppressions.xml
+++ b/src/libraries/System.Private.CoreLib/src/CompatibilitySuppressions.xml
@@ -4,17 +4,25 @@
   <Suppression>
     <DiagnosticId>CP0001</DiagnosticId>
     <Target>T:Internal.Console</Target>
+    <Left>ref/net8.0/System.Private.CoreLib.dll</Left>
+    <Right>lib/net8.0/System.Private.CoreLib.dll</Right>
   </Suppression>
   <Suppression>
     <DiagnosticId>CP0001</DiagnosticId>
     <Target>T:System.Runtime.CompilerServices.ICastable</Target>
+    <Left>ref/net8.0/System.Private.CoreLib.dll</Left>
+    <Right>lib/net8.0/System.Private.CoreLib.dll</Right>
   </Suppression>
   <Suppression>
     <DiagnosticId>CP0002</DiagnosticId>
     <Target>F:System.Resources.ResourceManager.BaseNameField</Target>
+    <Left>ref/net8.0/System.Private.CoreLib.dll</Left>
+    <Right>lib/net8.0/System.Private.CoreLib.dll</Right>
   </Suppression>
   <Suppression>
     <DiagnosticId>CP0002</DiagnosticId>
     <Target>F:System.Resources.ResourceSet.Reader</Target>
+    <Left>ref/net8.0/System.Private.CoreLib.dll</Left>
+    <Right>lib/net8.0/System.Private.CoreLib.dll</Right>
   </Suppression>
 </Suppressions>
\ No newline at end of file
