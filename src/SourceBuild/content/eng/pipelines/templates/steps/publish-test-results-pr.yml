parameters:
- name: pullRequestTitle
  type: string
  default: Update Test Baselines 

- name: updatedTestResultsPath
  type: string

steps:
  - script: |
      echo "Publishing test results to PR"
      ../scripts/publish-test-results-pr.sh \
        --pipelineId $(System.DefinitionId) \
        --buildId $(Build.BuildId) \
        --title "${{ parameters.pullRequestTitle }}" \
        --targetBranch "$(Build.SourceBranchName)" \
        --updatedTestResultsPath "${{ parameters.updatedTestResultsPath }}"
    displayName: Publish Test Results PR
    workingDirectory: $(Build.SourcesDirectory)
    condition: succeededOrFailed()
    env:
      GH_TOKEN: $(BotAccount-dotnet-sb-bot-pat)
